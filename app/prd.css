/* ===== PRD v2.2 Design Tokens / Base ===== */
:root{
  /* Colors (v2.2) */
  --bg-main:#F5F1E8;        /* 閭梧勹・域ｸｩ縺九＞繝吶・繧ｸ繝･・・*/
  --bg-card:#FFFFFF;
  --bg-error:#FFE8D6;
  --border-error:#FFB88C;

  --text-primary:#5A5A5A;
  --text-secondary:#8B8B8B;
  --text-translated:#6B9080; /* 鄙ｻ險ｳ繝・く繧ｹ繝郁牡・・2.2・・*/
  --text-white:#FFFFFF;
  --text-footer:#999999;

  --accent-primary:#7FCDCD;  /* 繝溘Φ繝育ｳｻ */
  --accent-secondary:#A8D5BA;

  --bar-customer:#7FCDCD;
  --bar-staff:#EAA89A;

  --status-listening:#EAA89A;
  --status-idle:#B8C5D0;

  /* Typography / Sizing / Anim */
  --font-logo-footer:12px;
  --font-welcome-body:20px;
  --font-language-prompt:24px;
  --font-button:28px;
  --font-status:18px;
  --font-guide:24px;
  --font-original:28px;
  --font-translated:36px;

  --line-height-normal:1.5;
  --line-height-translated:1.4;

  --space-between-messages:24px;
  --space-within-message:16px;

  --bar-width:6px;
  --button-height:80px;
  --button-radius:16px;
  --mic-icon-size:64px;

  --transition-fast:.2s;
  --transition-normal:.3s;
  --transition-slow:.5s;
  --breathe-duration:3s;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:'Noto Sans JP', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  background:var(--bg-main);
  color:var(--text-primary);
  line-height:var(--line-height-normal);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}

/* ===== Welcome (/display) v2.2 ===== */
.welcome-container{
  min-height:100vh;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  padding:40px 20px; position:relative;
  background:linear-gradient(135deg,#F5F1E8 0%,#E8E4DA 100%);
}
.settings-button{
  position:absolute;top:20px;right:20px;font-size:24px;background:none;border:none;
  cursor:pointer;padding:8px;opacity:.5;transition:opacity .3s;
}
.settings-button:hover{opacity:1}
.welcome-title{
  font-size:var(--font-language-prompt);font-weight:700;color:#5A5A5A;margin-bottom:48px;text-align:center;
}
.language-cards{
  display:grid;grid-template-columns:repeat(3,1fr);gap:24px;
  max-width:1000px;width:100%;margin:0 auto 40px;padding:0 32px;
}
.language-card{
  border-radius:20px;padding:32px 24px;text-align:center;cursor:pointer;
  transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 8px 24px rgba(0,0,0,.12);
  min-height:260px;display:flex;flex-direction:column;justify-content:space-between;
  position:relative;overflow:hidden; animation:fadeInUp .6s ease-out forwards;
}
.language-card:nth-child(1){animation-delay:.1s}
.language-card:nth-child(2){animation-delay:.2s}
.language-card:nth-child(3){animation-delay:.3s}
.language-card h2{font-size:32px;font-weight:700;color:#fff;margin-bottom:20px}
.language-card p{font-size:18px;color:rgba(255,255,255,.95);line-height:1.6;margin-bottom:20px;flex:1;display:flex;align-items:center;justify-content:center}
.tap-hint{font-size:16px;color:rgba(255,255,255,.8);font-weight:600}
.language-card:active{transform:scale(.98)}
.language-card:focus{outline:3px solid rgba(255,255,255,.5);outline-offset:4px}

/* English / Korean / Chinese 繧ｫ繝ｩ繝ｼ */
.language-card.english{background:linear-gradient(135deg,#5EB8B8 0%,#4A9E9E 100%)}
.language-card.english:hover{background:linear-gradient(135deg,#4A9E9E 0%,#368888 100%);transform:translateY(-8px);box-shadow:0 12px 32px rgba(94,184,184,.4)}
.language-card.korean{background:linear-gradient(135deg,#D98A7A 0%,#C76E5E 100%)}
.language-card.korean:hover{background:linear-gradient(135deg,#C76E5E 0%,#B55A48 100%);transform:translateY(-8px);box-shadow:0 12px 32px rgba(217,138,122,.4)}
.language-card.chinese{background:linear-gradient(135deg,#D085AD 0%,#BE6F9B 100%)}
.language-card.chinese:hover{background:linear-gradient(135deg,#BE6F9B 0%,#AC5989 100%);transform:translateY(-8px);box-shadow:0 12px 32px rgba(208,133,173,.4)}

.footer-logo{font-size:12px;color:#999;text-align:center;margin-top:32px}
.footer-logo::before{content:"Powered by ";font-weight:400}

/* fadeInUp */
@keyframes fadeInUp{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}

/* ===== Live (/display/live) ===== */
.conversation-container{contain:layout style paint; content-visibility:auto; contain-intrinsic-size:0 120px}
.size-warning{
  display:none;position:fixed;top:0;left:0;right:0;background:#FFC107;color:#000;
  padding:12px;text-align:center;font-size:14px;font-weight:600;z-index:9999;
}
.orientation-warning{
  display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);
  background:rgba(0,0,0,.9);color:#fff;padding:40px;border-radius:12px;text-align:center;z-index:9999;max-width:400px;
}
.orientation-warning::before{content:"導竊挺泱･・・;font-size:48px;display:block;margin-bottom:16px}
/* 蟆上＆縺吶℃繧狗判髱｢ or 讓ｪx邵ｦ縺悟ｰ上＆縺・ｴ蜷医↓隴ｦ蜻翫ｒ陦ｨ遉ｺ */
@media (max-width:767px), (max-height:599px){
  :root{--font-original:28px;--font-translated:36px;--font-button:28px}
  .size-warning{display:block}
}
@media (orientation:portrait){ .orientation-warning{display:block} }

/* 繧ｨ繝ｩ繝ｼ繧ｪ繝ｼ繝舌・繝ｬ繧､・・遘貞ｾ後ヵ繧ｧ繝ｼ繝会ｼ・*/
.error-overlay{
  position:fixed;bottom:80px;left:50%;transform:translateX(-50%);max-width:600px;width:90%;
  padding:24px;background:var(--bg-error);border:2px solid var(--border-error);
  border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.15);text-align:center;z-index:200;
  animation:fadeOut .5s ease-out 3s forwards;
}
@keyframes fadeOut{from{opacity:1}to{opacity:0}}
.error-icon{font-size:48px;margin-bottom:16px}
.error-title{font-size:28px;font-weight:600;color:var(--text-primary);margin-bottom:12px}
.error-message{font-size:20px;color:var(--text-primary);margin-bottom:8px}
.error-ready{font-size:16px;color:var(--text-secondary)}

/* 繝｡繝・そ繝ｼ繧ｸ蟾ｦ繝舌・・・px蝗ｺ螳夲ｼ・*/
.message{display:flex;gap:12px;margin-bottom:var(--space-between-messages)}
.message-bar{width:var(--bar-width);border-radius:3px;background:var(--bar-customer);flex:0 0 var(--bar-width)}
.message.staff .message-bar{background:var(--bar-staff)}
.message-body{background:var(--bg-card);border-radius:18px;padding:var(--space-within-message);box-shadow:0 2px 10px rgba(0,0,0,.06);flex:1}
.original{font-size:var(--font-original);color:var(--text-primary);margin-bottom:6px}
.translated{font-size:var(--font-translated);color:var(--text-translated);line-height:var(--line-height-translated)}
.btn-scroll-latest{position:sticky;bottom:8px;margin-left:auto;padding:8px 12px;border:1px solid #e5e7eb;border-radius:12px;background:#fff}

/* 繧｢繧ｯ繧ｻ繧ｷ繝薙Μ繝・ぅ */
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
/* === PRD enforced: StatusBar & Mic === */
.statusbar{display:flex;align-items:center;gap:8px;padding:8px 12px;border:1px solid #e5e7eb;border-radius:14px;background:#fff}
.status-text{font-size:var(--font-status)}
.status-dot{width:12px;height:12px;border-radius:9999px;display:inline-block}
.status-dot.idle{background:var(--status-idle)}
.status-dot.listening{background:var(--status-listening);box-shadow:0 0 0 0 rgba(234,168,154,.8);animation:pulse 1.6s infinite}
@keyframes pulse{0%{box-shadow:0 0 0 0 rgba(234,168,154,.7)}70%{box-shadow:0 0 0 14px rgba(234,168,154,0)}100%{box-shadow:0 0 0 0 rgba(234,168,154,0)}}

.mic-wrap{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px}
.mic-button{
  width:var(--mic-icon-size,96px);height:var(--mic-icon-size,96px);
  border-radius:9999px;border:none;cursor:pointer;background:#111;color:#fff;
  display:flex;align-items:center;justify-content:center;
  box-shadow:0 10px 24px rgba(0,0,0,.2);
  transition:transform var(--transition-normal), box-shadow var(--transition-normal), background var(--transition-fast);
  position:relative;overflow:hidden;
}
.mic-button.active{
  transform:scale(0.96);
  background:#C84C3A; /* 録音中は温かい赤系 */
  box-shadow:0 6px 16px rgba(200,76,58,.35);
}
.mic-button::after{
  content:"";position:absolute;inset:0;border-radius:9999px;
  background:radial-gradient(closest-side, rgba(255,255,255,.18), transparent 60%);
  opacity:.0;transition:opacity .2s;
}
.mic-button:active::after, .mic-button.active::after{opacity:.6}
.mic-help{font-size:14px;color:#6b7280}

/* === Micro-interactions: mic ambient (breathing red glow) === */
.mic-wrap{position:relative}
.mic-ambient{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width:140px; height:140px; pointer-events:none; filter:blur(14px);
  opacity:0; transition:opacity .2s ease;
}
.mic-ambient.on{ opacity:1 }
.mic-breath{
  display:block; width:100%; height:100%; border-radius:9999px;
  background: radial-gradient(circle, rgba(200,76,58,0.28) 0%, rgba(200,76,58,0.12) 52%, rgba(200,76,58,0) 70%);
  animation: mic-breathe var(--breathe-duration, 2.4s) ease-in-out infinite;
  transform-origin:center;
}
@keyframes mic-breathe {
  0%   { transform: scale(0.82); opacity:.85; }
  50%  { transform: scale(1.06); opacity:1;   }
  100% { transform: scale(0.82); opacity:.85; }
}
